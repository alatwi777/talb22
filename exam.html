<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</title>
<style>
    body {
        font-family: "Tajawal", sans-serif;
        background: #f0f2f5;
        padding: 20px;
    }
    .box {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 0 10px #ddd;
    }
    .question {
        background: #fafafa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 15px;
        border: 1px solid #ddd;
    }
    textarea {
        width: 100%;
        height: 120px;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
    }
    button {
        background: #007bff;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
    }
    button:hover {
        background: #0056b3;
    }
</style>
</head>
<body>

<h2>ğŸ“˜ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>

<div class="box">
    <strong>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</strong> <span id="studentName"></span><br>
    <strong>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ:</strong> <span id="studentCivil"></span>
</div>

<div id="questionsContainer"></div>

<button onclick="submitExam()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>

<script>
const API = "Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù‡Ù†Ø§";

// ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
document.getElementById("studentName").innerText = localStorage.getItem("studentName");
document.getElementById("studentCivil").innerText = localStorage.getItem("studentCivil");

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
async function loadQuestions() {
    const examId = localStorage.getItem("examId");

    const response = await fetch(`${API}?action=getQuestions&examId=${examId}`);
    const questions = await response.json();

    displayQuestions(questions);
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
function displayQuestions(questions) {
    const container = document.getElementById("questionsContainer");
    container.innerHTML = "";

    questions.forEach(q => {
        let html = `<div class="question">
            <strong>Ø³Ø¤Ø§Ù„ ${q.questionId}:</strong> ${q.title}<br><br>`;

        if (q.type === "mcq") {
            const options = q.options.split("ØŒ");
            options.forEach(opt => {
                html += `
                    <label>
                        <input type="radio" name="q${q.questionId}" value="${opt}">
                        ${opt}
                    </label><br>
                `;
            });
        }

        if (q.type === "essay") {
            html += `<textarea id="q${q.questionId}"></textarea>`;
        }

        if (q.type === "handwrite") {
            html += `
                <p>ğŸ“· Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ø¥Ø¬Ø§Ø¨ØªÙƒ:</p>
                <input type="file" id="q${q.questionId}">
            `;
        }

        html += `</div>`;
        container.innerHTML += html;
    });
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
function submitExam() {
    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª (Ø³Ù†Ø¶ÙŠÙ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù„Ø§Ø­Ù‚Ù‹Ø§)");
}

loadQuestions();
</script>

</body>
</html>
